\chapter{Setup, Installation}
In general, the archiver tools use the EPICS build system as for
example described in the ``EPICS: Input/Output Controller Application
Developer's Guide'' for Release 3.14.4.
This means you need the following prerequisites:
\begin{enumerate}
\item EPICS Base R3.14.4 (or later) needs to be built and installed.\\
      Unless you are running Linux, this might require getting a
      compiler, perl and gnumake.
\item An EPICS extensions setup: config directory with the RELEASE
      file appropriately configured to point to your EPICS base installation.
\item ChannelArchiver sources, placed in the ``src'' subdirectory of
      your EPICS extensions directory tree. 
\end{enumerate}

\noindent All the above is either pretty obvious to those who know it already
or beyond this manual to explain, in which case we have to refer you
to the EPICS web site 
\href{http://www.aps.anl.gov/epics}{http://www.aps.anl.gov/epics}. 

In addition, the archiver's network data server currently uses
XML-RPC. The \INDEX{XML-RPC Setup} requires the installation of at
least the C/C++ and Java support. If you want to access the archive
data server from e.g.\ perl, this would mean you have to get XML-RPC
support for perl, too.

\section{XML-RPC for C/C++}
We use xmlrpc-c-0.9.9 from
\href{http://xmlrpc-c.sourceforge.net}{http://xmlrpc-c.sourceforge.net}.
The Makefiles in ChannelArchiver/XMLRPCServer assume this to be
installed in the default location, that is under /usr/local.

With RedHat~6.2, xmlrpc-c compiled out of the box.
Under RedHat~9.0, it ran into a compile-time error that could be fixed
by un-commenting ``using namespace std;'' in the affected header file.

\section{Apache Web Server}
The XML-RPC data server is a CGI program that needs to be served by a
web server. With the default setup of the Apache web server under
Linux, a simple way to do this is:

\begin{lstlisting}
# Create subdir under pre-configured 'cgi-bin'
mkdir /var/www/cgi-bin/xmlrpc

# Add xml-rpc library to LD_LIBRARY_PATH
cat >>/etc/httpd/conf/httpd.conf
<Directory /var/www/cgi-bin/xmlrpc>
        SetEnv LD_LIBRARY_PATH  /usr/local/lib
</Directory>
^D

# Restart web server
/etc/rc.d/init.d/httpd restart
\end{lstlisting}


\noindent Now you can copy the archive data server as
ArchiveServer.cgi into the new xmlrpc directory and access it via
http://localhost/cgi-bin/xmlrpc/ArchiveServer.cgi.

\NOTE The file extensions .cgi is essential!

