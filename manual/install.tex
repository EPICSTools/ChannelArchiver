\chapter{Setup, Installation}

\section{Compilation}
The archiver tools use the EPICS build system as for example described
in the ``EPICS: Input/Output Controller Application Developer's
Guide'' for Release 3.14.4.  This means you need the following
prerequisites:
\begin{enumerate}
\item EPICS Base R3.14.4 (or later) needs to be built and installed.\\
      Unless you are running Linux, this might require getting a
      compiler, perl and gnumake.
\item An EPICS extensions setup: config directory with the RELEASE
      file appropriately configured to point to your EPICS base installation.
\item ChannelArchiver sources, placed in the ``src'' subdirectory of
      your EPICS extensions directory tree. 
\end{enumerate}

\noindent All the above is either pretty obvious to those who know it
already or beyond this manual to explain, in which case we have to
refer you to the EPICS web site
\href{http://www.aps.anl.gov/epics}{http://www.aps.anl.gov/epics}. 
In addition, some open source tools and libraries are required which
are listed in the following subsections.

\subsection{XML-RPC}
The archiver's network data server uses XML-RPC. The \INDEX{XML-RPC
Setup} requires the installation of at least the C/C++ and Java
support. If you want to access the archive data server from e.g.\
perl, this would mean you have to get XML-RPC support for perl, too.

For C/C++, we use xmlrpc-c-0.9.9 from
\href{http://xmlrpc-c.sourceforge.net}{http://xmlrpc-c.sourceforge.net}.
The Makefiles in ChannelArchiver/XMLRPCServer assume this to be
installed in the default location, that is under /usr/local.

With RedHat~6.2, xmlrpc-c compiled out of the box.
Under RedHat~9.0, it ran into a compile-time error that could be fixed
by un-commenting ``using namespace std;'' in the header file which
reported the error.

\subsection{Xerces XML Library}
The \INDEX{Xerces} library is used to parse the XML configuration files of the
ArchiveEngine and the network data server.
See ``Xerces C++'' under
\begin{center}
\href{http://xml.apache.org/index.html}{http://xml.apache.org/index.html}
\end{center}
or try this direct link:
\begin{center}
\href{http://xml.apache.org/xerces-c/index.html}
     {http://xml.apache.org/xerces-c/index.html}
\end{center}
to get the sources. The Makefiles assume this to be installed under /usr/local.
Example installation under RH9:
\begin{lstlisting}[keywordstyle=\sffamily]
tar vzoxf xerces-c-current.tar.gz 
cd xerces-c-src2_4_0
export XERCESCROOT=`pwd`
cd $XERCESCROOT/src/xercesc
autoconf
./runConfigure -plinux -cgcc -xg++\
               -minmem -nsocket \
               -tnative -rpthread \
                -P/usr/local
make
su
make install
\end{lstlisting}
% Building Samples
%cd $XERCESCROOT/samples
%./runConfigure -plinux -cgcc -xg++
%make
%ls ../bin
%make clean

\section{Expat}
As an inferior alternative to Xerces, the \INDEX{Expat} library is supported
after changing Tools/FUX.h. Expat comes with e.g.\ RedHat~9,
otherwise see
\begin{center}
\href{http://expat.sourceforge.net}{http://expat.sourceforge.net}.
\end{center}
Expat might be a little faster and easier to install, but it does not
offer validation, so it will be up to you to assert that all XML
configuration files are 100\% perfect.

\section{Installation}
There are no specific installation procedures for the ArchiveEngine,
ArchiveExport, and most other Channel Archiver components. The binaries for
them end up in the standard EPICS extension directories. Their usage
might require configuration files, the format of which is described as
part of the tools section in this manual.

The ArchiveDataServer requires integration with your web server. The
process is exemplified in the Data Server chapter starting on page
\pageref{sec:dataserver}.

