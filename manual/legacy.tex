\chapter{Legacy}
The main difference between the current version of the Channel Archiver toolset
and previous versions are:
\begin{itemize}
\item EPICS Base: Current toolset requires R3.14.4 or later.
\item Index: Current toolset uses index files, previous toolset
      used Directory files.
\item Configurations: All configuration files are based on XML,
      while they used to be generic ASCII files.
\end{itemize}

\section{Directory Files}
In case you have existing archives based on Directory files,
you can use the ArchiveDataTool to create an index file for each existing directory file
and that way migrate to the new toolset.
The ArchiveDataTool can also create Directory files from index files, in case you
need to use an older tool to investigate data in new archives.

\section{ArchiveManager}
The ArchiveManager command line tool for managing archives that use the
older Directory files is still available.
It does \emph{not} work with the new index files.
After migrating the data to the new index format,
ArchiveDataTool replaces the ArchiverManager. You can use the ArchiveDataTool
to create index files for existing directory files.

\section{Archive Engine ASCII Configurations} \label{sec:ASCIIConfig}
The ChannelArchiver/Engine directory contains ConvertEngineConfig.pl,
a perl script that attemps to convert old-style ASCII configuration
files for the previous ArchiveEngine into the new XML files:
\begin{lstlisting}[keywordstyle=\sffamily]
USAGE:
ConvertEngineConfig [options] ASCII-config {ASCII-config}
 
Options:
  -d <DTD>       :  Specify DTD
  -o <filename>  :  Set output file name
 
This tool reads the ASCII configuration file
for an Engine and converts it into the XML
config file.
 
One can use either one ASCII config file
(with !group entries) or supply a list of
ASCII files, where each one will then define
a group.
\end{lstlisting}

\noindent Some sites might actually prefer to use the ASCII
configuration files and convert them to the XML format with this tool,
so here is a brief description of the ASCII format.
Each ASCII file defines a group of channels.
\begin{itemize}
\item ``!write\_period $<$seconds$>$''\\
  Configures the write\_period parameter. Most of the global engine
  parameters described in section \ref{sec:engineconfig} are allowed
  via the format ``!$<$parameter$>$ $<$value$>$''.
\item ``!group $<$file-name$>$''\\
  Read another group file.
  To use this, you should create one ``main'' configuration file
  that contains only ``!group ...'' lines.
  Preferably, do not use the ``!group ...'' command at all.
  Simply create one ASCII file per group, and list all the group files
  that you want one engine to handle on the ConvertEngineConfig
  command line.
\item ``$<$channel$>$ $<$period$>$''\\
  Selects scanned sampling of the given channel.
\item ``$<$channel$>$ $<$period$>$ Monitor''\\
  Selects monitored sampling of the given channel.
\item ``$<$channel$>$ $<$period$>$ Monitor Disable''\\
  Selects monitored sampling of the given channel; channel disables
  its group..
\end{itemize}

\section{CAManager, CAbgManager}
The ArchiveDaemon offers the basic functionality of the CAbgManager:
It monitors, starts and restarts ArchiveEngines and offers a web page
for status information.
There is no graphical configuration tool comparable to the CAManager,
you have to create the XML configuration file for the ArchiveDaemon
by hand.

